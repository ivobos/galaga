var o=Object.defineProperty;var c=(a,t,h)=>t in a?o(a,t,{enumerable:!0,configurable:!0,writable:!0,value:h}):a[t]=h;var r=(a,t,h)=>c(a,typeof t!="symbol"?t+"":t,h);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function h(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(i){if(i.ep)return;i.ep=!0;const s=h(i);fetch(i.href,s)}})();class d{constructor(){r(this,"canvas");r(this,"ctx");r(this,"player");r(this,"bullets");r(this,"aliens");r(this,"keys");r(this,"lastBulletTime");r(this,"BULLET_COOLDOWN",250);this.canvas=document.getElementById("gameCanvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=800,this.canvas.height=600,this.player={x:this.canvas.width/2,y:this.canvas.height-50,width:40,height:40,speed:5},this.bullets=[],this.aliens=[],this.keys={},this.lastBulletTime=0,this.initAliens(),window.addEventListener("keydown",t=>this.keys[t.key]=!0),window.addEventListener("keyup",t=>this.keys[t.key]=!1),this.gameLoop()}initAliens(){const i=(this.canvas.width-480)/2,s=50;for(let n=0;n<5;n++)for(let l=0;l<8;l++)this.aliens.push({x:i+l*60,y:s+n*60,width:30,height:30,speed:1})}handleInput(){this.keys.ArrowLeft&&(this.player.x=Math.max(0,this.player.x-this.player.speed)),this.keys.ArrowRight&&(this.player.x=Math.min(this.canvas.width-this.player.width,this.player.x+this.player.speed)),this.keys[" "]&&Date.now()-this.lastBulletTime>this.BULLET_COOLDOWN&&(this.bullets.push({x:this.player.x+this.player.width/2-2,y:this.player.y,width:4,height:10,speed:7}),this.lastBulletTime=Date.now())}update(){this.bullets=this.bullets.filter(e=>(e.y-=e.speed,e.y>0)),this.aliens.forEach(e=>{e.x+=e.speed});const t=Math.max(...this.aliens.map(e=>e.x+e.width)),h=Math.min(...this.aliens.map(e=>e.x));(t>this.canvas.width||h<0)&&this.aliens.forEach(e=>{e.speed*=-1,e.y+=20}),this.bullets=this.bullets.filter(e=>{const i=this.aliens.find(s=>e.x<s.x+s.width&&e.x+e.width>s.x&&e.y<s.y+s.height&&e.y+e.height>s.y);return i?(this.aliens=this.aliens.filter(s=>s!==i),!1):!0})}draw(){this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#0f0",this.ctx.fillRect(this.player.x,this.player.y,this.player.width,this.player.height),this.ctx.fillStyle="#fff",this.bullets.forEach(t=>{this.ctx.fillRect(t.x,t.y,t.width,t.height)}),this.ctx.fillStyle="#f00",this.aliens.forEach(t=>{this.ctx.fillRect(t.x,t.y,t.width,t.height)})}gameLoop(){this.handleInput(),this.update(),this.draw(),requestAnimationFrame(()=>this.gameLoop())}}new d;
